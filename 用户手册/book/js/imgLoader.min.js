(function(){function isArray(obj){return Object.prototype.toString.call(obj)==='[object Array]'}var loader=function(imgList,callback,timeout){timeout=timeout||5000;imgList=isArray(imgList)&&imgList||[];callback=typeof(callback)==='function'&&callback;var total=imgList.length,loaded=0,imgages=[],_on=function(){loaded<total&&(loaded+=1,callback&&callback(loaded/total))};if(!total){return callback&&callback(1)}for(var i=0;i<total;i+=1){imgages[i]=new Image();imgages[i].onload=imgages[i].onerror=_on;imgages[i].src=imgList[i]}setTimeout(function(){loaded<total&&(loaded=total,callback&&callback(loaded/total))},timeout*total)};"function"===typeof define&&define.cmd?define(function(){return loader}):window.imgLoader=loader})();